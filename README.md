# JimFit

![짐핏5](https://github.com/Jimmy-Jung/JimFit/assets/115251866/5cfe8935-1f8c-474c-a141-438fc098c4d3)

# 프로젝트 개요

근육과 운동기구로 분류된 1300여개의 운동 리스트 제공

기록된 운동 데이터를 기반으로 사용한 근육 회복률 이미지 제공

백그라운드 타이머 및 기록 데이터 백업/복구 제공

1개월 동안 1인 기획 → 디자인 → 개발

전체 유료 앱 7위, 피트니스 부분 1위 달성

## **기술 스택**

- 언어: iOS16 +
- UI 프레임워크: UIKit
- 레이아웃: SnapKit
- 아키텍처 패턴: MVVM
- 이벤트 처리: Delegate
- 비동기 프로그래밍: RxSwift, Async/Await
- 데이터베이스: Realm
- 네트워킹: Alamofire
- 결과 처리: Result
- 캘린더: FSCalendar
- 파일 관리: FileManager, Zip
- 앱 분석: Firebase Crashlytics
- UI 컴포넌트: JimmyKit

## **핵심 기능 요약**

Etag 캐시 유효성 검증, 캘린더, 백그라운드 타이머, Realm (검색, 정렬, 백업, 복구), 이미지 합성(근육 회복률), 다크모드, 알람

## **핵심 기능 및 성과**

- Etag로 캐시 유효성을 검증하여 서버 호출 대비 데이터 사용량을 520% 감소시킴
- 의존성 주입을 통해 View와 Model을 Controller로부터 분리해 Unit Test 코드 작성
- SRP를 기반으로 기능 단위로 함수를 분리하고 분리된 함수를 클래스로 분리하여 재사용성과 유지 보수성을 향상시킴

- Scene이 Inactive될 때와 Active될 때의 Date를 비교해 백그라운드 타이머 구현
- Delegate패턴을 기반으로 재사용 가능한 UI 컴포넌트 구현
- 디바이스 언어를 추적하고 변경될 경우 데이터를 지역화해 실시간 검색기능 구현

# 구현

### 아키텍처

이 애플리케이션은 MVVM과 MVC 아키텍처를 적용하였습니다.

### 서버 통신

Firebase Storage와의 서버 통신을 위해 Alamofire 라이브러리를 사용합니다.

Router를 통해 Etag 캐시 검증과 데이터 패치 두 가지 케이스를 정의합니다.

### 데이터 베이스

이 애플리케이션은 Realm을 사용하여 운동 리스트와 기록 데이터를 관리합니다.

사용자는 SearchBar를 통해 운동 리스트를 검색할 수 있습니다.

주로 사용하는 운동을 즐겨찾기에 저장할 수 있습니다.

기록한 데이터는 백업 및 복구가 가능합니다.

### 백그라운드 타이머

iOS 앱은 백그라운드에서 타이머의 작동 여부를 통제할 수 없으므로, Scene이 Active될 때와 Inactive될 때의 Date를 비교하여 타이머를 관리합니다.

Timer를 Singleton 객체로 관리하여, 다른 View에서도 쉽게 타이머에 접근할 수 있습니다.

### 알람

특정 시간에 Notification을 보내는 알람을 설정할 수 있습니다.

앱이 시작할 때 알람 권한을 요청합니다.

알람 권한이 거절되면 알람이 작동하지 않고 사용자가 알람에 접근하면 앱의 설정으로 유도하는 얼럿을 띄웁니다.

### 지역화

서버에서 받는 데이터는 Realm에 저장됩니다. 앱이 실행되는 동안 디바이스의 언어를 추적하며, 언어 설정이 변경되면 해당 언어로 지역화된 Realm이 생성됩니다. 

이를 통해 사용자는 SearchBar에서 선택한 언어로 검색이 가능합니다.


# 회고

데이터베이스 유지보수와 확장성에 대해 많이 고민할 수 있었습니다. 백그라운드 타이머 구현을 통해 iOS 정책을, Realm을 번들에 저장하면서 SandBox의 보안성을 공부할 수 있었습니다.

처음에는 디바이스 내부에서 Realm으로 데이터베이스를 관리하다가, 빠른 데이터 업데이트와 배포를 위해 데이터베이스를 서버로 이동하는 과정에서 서버 데이터 사용량이 급증하는 문제에 직면했습니다. 이를 해결하기 위해 Etag를 기반으로 서버 트래픽을 줄이는 과정에서 네트워킹과 HTTP에 대해 공부할 기회가 있었습니다.

데이터베이스의 저장소를 정하지 못한 채 개발을 진행하다 보니, 네트워킹 없이 앱을 테스트하는 과정에서 MVVM과 Unit Test의 중요성을 깨달았습니다.

마지막으로, 앱 개발 과정에서 객체 간 의존성 때문에 기능 수정과 분리에 어려움을 겪었습니다. 이 경험을 통해 의존성 주입과 아키텍처에 대해 더 고민해야겠다는 생각을 하게 되었습니다.
